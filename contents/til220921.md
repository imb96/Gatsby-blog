---
date: '2022-09-21'
title: 'TIL 220919'
categories: ['TIL']
summary: 'Routing, SPA, React Router'
thumbnail: './til.jpg'
---

> 책 리액트 다루는 기술을 읽고 정리한 내용입니다.

# 라우팅이란?

웹 어플리케이션에서 라우팅이란 개념은 사용자가 요청한 URL에 따라 알맞은 페이지를 보여주는 것을 의미한다. 웹 어플리케이션을 만들 때 프로젝트를 하나의 페이지로 구성할 수도 있고, 여러 페이지로 구성할 수도 있을 것이다.
예를 들어 일정 관리 앱은 하나의 페이지로도 충분할 수 있지만, 블로그를 만든다고 가중해볼때, 블로그 앱은 여러 페이지로 구성되 있다. 어떤 페이지가 필요할까

- 글쓰기 페이지: 새로운 포스트를 작성하는 페이지
- 포스트 목록 페이지: 블로그에 작성된 여러 포스트의 목록을 보여주는 페이지
- 포스트 읽기 페이지: 하나의 포스트를 보여주는 페이지
  이렇게 여러 페이지로 구성딘 웹 앱을 만들 때 페이지 별도 컴포넌트들을 분리해 가면서 프로젝트를 관리하기 위해 필요한 것이 바로 라우팅 시스템이다.
  리액트에서 라우트 시스템을 구축하기 위해 사용할 수 있는 선택지는 크게 두 가지가 있다.
- 리액트 라우터(React Router): 이 라이브러리는 리액트의 라우팅 관련 라이브러리들중에서 가장 오래됐고, 가장 많이 사용되고 있다. 컴포넌트 기반으로 라우팅 시스템을 설정할 수 있다.
- Next.js: 리액트 프로젝트의 프레임워크. CRA 처럼 리액트 프로젝트 설정을 하는 기능, 라우팅 시스템 최적화, 다국어 시스템 지원, 서버 사이드 렌더링 등 다양한 기능을 제공한다. 이 프레임워크의 라우팅 시스템은 파일 경로 기반으로 작동한다.

# SPA란?

싱글 페이지 어플리케이션이란 하나의 페이지로 이루어진 어플리케이션이라는 의미이다. 리액트 라우터를 사용하여 여러 페이지로 구성된 프로젝트를 만들 수 있다고 했는데 왜 싱글 페이지 어플리케이션이라고 불리는지 의문이 들 수 있다.
이를 이해하기 위해서는 싱글 페이지 애플리케이션이란 개념이 생기기 전에 사용되던 멀티 페이지 애플리케이션이 어떻게 작동하는지 살펴봐야 한다.
멀티 페이지 애플리케이션은 사용자가 다른 페이지로 이동할 때마다 새로운 html을 받아오고, 페이지를 로딩할 때마다 서버에서 CSS,JS, 이미지 파일 등의 리소스를 전달받아 브라우저 화면에 보여주었다. 사용자 인터랙션이 많고 다양한 정보를 제공하는 모던 웹 애플리케이션은 이 방식이 적합하지 않다.
그래서 리액트 같은 라이브러리를 사용해서 뷰 렌더링을 사용자의 브라우저가 담당하도록하고, 우선 웹 애플리케이션을 브라우저에 불러와서 실행시킨 후에 사용자와의 인터랙션이 발생하면 필요한 부분만 자바스크립트를 사용하여 업데이트 하는 방식을 사용하게 됐다. 만약 새로운 데이터가 필요하다면 서버 API를 호출하여 필요한 데이터만 새로 불러와 애플리케이션에서 사용할 수 있게 되었다.
이렇게 html은 한번만 받아와서 웹 애플리케이션을 실행시킨 후, 이후에는 필요한 데이터만 받아와서 화면에 업데이트하는 것이 싱글 페이지 애플리케이션이다.
리액트 라우터 같은 라우팅 시스템은 사용자의 브라우저 주소창의 경로에 따라 알맞은 페이지를 보여준다. 이후 링크를 눌러서 다른 페이지로 이동할 때 서버에 다른 페이지의 html을 새로 요청하는 것이 아니라, 브라우저의 History API를 사용하여 브라우저의 주소창의 값만 변경하고 기존에 페이지에 띄웠던 웹 애플리케이션을 그대로 유지하면서 라우팅 설정에 따라 또 다른 페이지를 보여주게 된다.

# 리액트 라우터 적용 및 기본 사용법

`yarn add react-router-dom`
프로젝트에 리액트 라우터를 적용할 때는 src/index.js 파일에서 react-router-dom에 내장되어 있는 BrowserRouter라는 컴포넌트를 사용하여 감싸면 된다. 이 컴포넌트는 웹 애플리케이션에 HTML5의 History API를 사용하여 페이지를 새로 불러오지 않고도 주소를 변경하고 현재 주소의 경로에 관련된 정보를 리액트 컴포넌트에서 사용할 수 있도록 해준다.

```jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import './index.css'
import App from './App'
import { BrowserRouter } from 'react-router-dom'
const root = ReactDOM.createRoot(document.getElementById('root'))
root.render(
  <BrowserRouter>
    <App />
  </BrowserRouter>,
)
```

### Route 컴포넌트로 특정 경로에 원하는 컴포넌트 보여주기

사용자의 브라우저 주소 경로에 따라 우리가 원하는 컴포넌트를 보여주려면 Router라는 컴포넌트를 통해 라우트 설정을 해주어야 한다.
Route 컴포넌트는 다음과 같이 사용한다.
`<Route path='주소규칙' element={보여 줄 컴포넌트 JSX} />`

```jsx
import { Route, Routes } from 'react-router-dom'
import About from './pages/About'
import Home from './pages/Home'
import './App.css'

function App() {
  return (
    <Routes>
      <Route path="/" element={<Home />} />
      <Route path="/about" element={<About />} />
    </Routes>
  )
}

export default App
```

### Link 컴포넌트를 사용하여 다른 페이지로 이동하는 링크 보여주기

리액트 라우터를 사용하는 프로젝트에서는 a 태그를 바로 사용하면 안된다. 왜냐하면 a 태그를 클릭하여 페이지를 이동할 때 브라우저에서는 페이지를 새로 불러오게 되기 때문이다.
Link 컴포넌트 역시 a 태그를 사용하긴 하지만, 페이지를 새로 불러오는 것을 막고 History API를 통해 브라우저 주소의 경로만 바꾸는 기능이 내장되어 있다.
Link 컴포넌트는 다음과 같이 사용한다.
`<Link to='링크'>링크 이름</Link>`

```jsx
import React from 'react'
import { Link } from 'react-router-dom'
const Home = () => {
  return (
    <div>
      <h1>HOME</h1>
      <p>This page is First Page</p>
      <Link to="/about">Introduce</Link>
    </div>
  )
}
export default Home
```
