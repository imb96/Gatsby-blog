{"componentChunkName":"component---src-templates-post-template-tsx","path":"/memoization/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>메모이제이션 (memoization)이란</p>\n<blockquote>\n<p>메모이제이션(memoization)은 컴퓨터 프로그램이 동일한 계산을 반복해야 할 때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행 속도를 빠르게 하는 기술이다. 동적 계획법의 핵심이 되는 기술이다. (위키 백과)</p>\n</blockquote>\n<p>쉽게 이야기하면, 컴퓨터의 입장에서 비용이 높은 함수의 호출 결과를 저장해 두었다가, 완전히 동일한 입력으로 함수를 호출하면 새로 함수를 호출하지 않고 이전에 저장해 두었던 결과를 반환해주는 것이다.</p>\n<h3>리액트의 메모이제이션</h3>\n<p>리액트에서는 부모 컴포넌트가 변경되면 자식 컴포넌트도 무조건 리렌더링된다. React.memo 를 사용해 컴포넌트를 래핑하면 렌더링이 일어나지 않는다. 렌더 단계에서 컴포넌트를 비교를 거쳤지만 memo로 래핑한 덕분에 props가 변경되지 않으면 렌더링이 생략되므로 커밋 단계도 생략된다.</p>\n<p>리액트에서 제공하는 API중 <code class=\"language-text\">useMemo</code>, <code class=\"language-text\">useCallback</code> 훅과 고차 컴포넌트인 <code class=\"language-text\">memo</code>는 리액트에서 발생하는 리렌더링을 최소한으로 줄이기 위해서 제공된다.</p>\n<p>메모이제이션도 비용이 든다. 값을 비교하고 렌더링 또는 재계산이 필요한지 확인하는 작업, 이전에 결과물을 저장해 두었다가 다시 꺼내와야 하는 두 가지 비용이 있다.</p>\n<p>memo를 썼을 때 지불해야 하는 비용</p>\n<ul>\n<li>props에 대한 얕은 비교</li>\n<li>CPU와 메모리를 사용해 이전 렌더링 결과물을 저장해 둬야 하고, 리렌더링이 필요가 없다면 이전 결과물을 사용해야 한다. -> 리액트의 기본적인 재조정 알고리즘 때문에 이전 결과물을 어떻게든 저장해두고 있다.</li>\n<li>따라서 memo로 지불해야 하는 비용은 props에 대한 얕은 비교뿐이다. 물론 이 비용 또한 무시할 수는 없다. props가 크고 복잡해진다면 이 비용 또한 커질 수 있다.</li>\n</ul>\n<p>memo를 하지 않았을 때 발생할 수 있는 문제</p>\n<ul>\n<li>렌더링을 함으로써 발생하는 비용</li>\n<li>컴포넌트 내부의 복잡한 로직 재실행</li>\n<li>그리고 위 두가지가 모든 자식 컴포넌트에서 반복해서 일어남</li>\n<li>리액트가 구 트리와 신규 트리를 비교</li>\n</ul>\n<p>메모이제이션은 하지 않는 것보다 메모이제이션 했을 때 이점을 누릴 수 있다. 이것이 비록 섣부른 초기화라 할지라도 했을 때 누릴 수 있는 이점, 그리고 이를 실수로 빠트렸을 때 치러야할 위험 비용이 더 크기 때문에 최적화에 대한 확신이 없다면 가능한 한 모든 곳에서 메모이제이션을 활용한 최적화를 하는 것이 좋다.</p>\n<h3>useMemo vs useCallback vs React.memo</h3>\n<p><code class=\"language-text\">useMemo</code></p>\n<ul>\n<li>연산의 결과를 기억하고, 의존성 배열이 변경되었을 때만 다시 계산한다.</li>\n<li>렌더링 중에 계산이 필요하고 , 해당 계산 결과를 기억하고 싶을 때 사용한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value1<span class=\"token punctuation\">,</span> value2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">calcualte</span><span class=\"token punctuation\">(</span>v1<span class=\"token punctuation\">,</span>v2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>v1<span class=\"token punctuation\">,</span> v2<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">useCallback</code></p>\n<ul>\n<li>함수를 메모이제이션하여 의존성 배열의 값이 변하지 않으면 메모이제이션 한 함수를 반환한다.</li>\n<li>자식 컴포넌트에 콜백 함수를 props로 전달하고, 해당 콜백 함수가 불필요하게 다시 생성되지 않도록 할 때 사용한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> memoizedCallback <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">React.memo</code></p>\n<ul>\n<li>함수형 컴포넌트의 렌더링 결과를 메모이제이션하여, props가 변경되지 않으면 이전 렌더링 결과를 재사용한다.</li>\n<li>사용 시점: 부모 컴포넌트에서 자식 컴포넌트를 렌더링할 때, 자식 컴포넌트의 불필요한 리렌더링을 방지하고 싶을 때 사용한다.</li>\n</ul>\n<p>요약하면, <code class=\"language-text\">useMemo</code>는 값의 메모이제이션에 사용되고, <code class=\"language-text\">useCallback</code>은 함수의 메모이제이션에 사용되며, <code class=\"language-text\">React.memo</code>는 컴포넌트의 렌더링 결과를 메모이제이션한다.</p>\n<blockquote>\n<p>Reference: 리액트 모던 딥다이브</p>\n</blockquote>","frontmatter":{"title":"React Memoization","summary":"react 성능 최적화를 위한 메모이제이션 방법","date":"2024.01.16","categories":["react"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAMABQDASIAAhEBAxEB/8QAGgAAAQUBAAAAAAAAAAAAAAAAAAIEBQYHCf/EABcBAAMBAAAAAAAAAAAAAAAAAAABAwX/2gAMAwEAAhADEAAAAe0tF1dniUlhAj//xAAaEAACAwEBAAAAAAAAAAAAAAADBAACBQEG/9oACAEBAAEFAtZthJbK9RzSYhBjNUaSQbz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAYEQACAwAAAAAAAAAAAAAAAAAQIRExUf/aAAgBAgEBPwFRT0f/xAAgEAADAAIBBQEBAAAAAAAAAAABAgMEEQUAEhMUITEQ/9oACAEBAAY/Ap3xklV/agjRrScRWTChqiXq6Rx6dqdy2sTNQrdynY642DHAx7XFp5WLHlOJ5Ohr6csrGtjNgZ9X9SpGWBTw0BEdu0tgt147TnVDolKzWiEj6CVcMuwfo+fD+dLSODhRogISksTHlRA2+4K6TVlDbOwCN7O/0/z/xAAZEAEBAQEBAQAAAAAAAAAAAAABESEAEEH/2gAIAQEAAT8h3RukuV5iHSIRzWHvMOay43mNU8jY1OCFa0h74QABwD2ds52vf//aAAwDAQACAAMAAAAQaM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAZEQEBAQEBAQAAAAAAAAAAAAABIRFREDH/2gAIAQIBAT8QEoU1mvkwnNvZE3z/xAAaEAEAAgMBAAAAAAAAAAAAAAABABEQUaHR/9oACAEBAAE/EKONOCI6m5QZ58J8h8PKu/5Ac/E4oQgKIYBg9KSwprROkB30d9n/2Q=="},"images":{"fallback":{"src":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/97099/til.jpg","srcSet":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/d75cc/til.jpg 557w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/a3617/til.jpg 1113w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/97099/til.jpg 2226w","sizes":"(min-width: 2226px) 2226px, 100vw"},"sources":[{"srcSet":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/9e13a/til.webp 557w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/f9e0a/til.webp 1113w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/b09bd/til.webp 2226w","type":"image/webp","sizes":"(min-width: 2226px) 2226px, 100vw"}]},"width":2226,"height":1322}},"publicURL":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/til.jpg"}}}}]}},"pageContext":{"slug":"/memoization/"}},"staticQueryHashes":[]}