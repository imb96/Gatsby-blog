{"componentChunkName":"component---src-templates-post-template-tsx","path":"/mp_1/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<blockquote>\n<p>데브코스 안에서 진행중인 미니프로젝트 스터디 에서 발표한 내용입니다.</p>\n<p>진행중인 프로젝트의 변경사항이나 공부한내용을 공유하고 발표하는 스터디입니다.</p>\n</blockquote>\n<h3>목적</h3>\n<p>현재 운영중인 이 블로그에 포스트가 많거나 포스트의 내용이 길 때 스크롤을 다시 올리기 불편할 수 있기 때문에 화면의 최상단으로 스크롤을 올려주는 기능을 만들어 보았습니다.</p>\n<h3>기능</h3>\n<p>처음 화면에서는 버튼이 보이지 않고 스크롤을 조금 내리다보면 버튼이 보이게 되고 버튼을 클릭하면 화면의 최상단으로 스크롤이 이동합니다.</p>\n<h3>스타일</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// styled Component를 사용해서 스크롤버튼의 스타일을 작성했습니다.</span>\n<span class=\"token keyword\">const</span> ScrollToTopButton <span class=\"token operator\">=</span> styled<span class=\"token punctuation\">.</span>button<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span> isVisible<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span> <span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  width: 48px;\n  height: 48px;\n  position: fixed;\n  bottom: 10%;\n  right: 12%;\n  background-color: #6584fb;\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\n\t\n  opacity: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> isVisible <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>isVisible <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">;\n  transition: opacity 0.3s ease-in-out;\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>opacity 값을 isVisible이 truthy한 값 일때, opacity 값을 1로, falsy한 값이면 opacity를 0으로 줌으로써 버튼이 보였다 안보였다 할 수 있게 만들었습니다.</li>\n<li>opacity 속성이 변화할 때 0.3초동안 부드럽게 변하도록 설정했습니다.</li>\n</ul>\n<h3>로직</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// useState Hook을 사용해서 isVisible의 값을 변경시킵니다.</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isVisible<span class=\"token punctuation\">,</span> setIsVisible<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// 스크롤 이벤트가 발생할 때마다 스크롤 위치를 확인하고 isVisible 값을 업데이트 하는 함수입니다.</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleScroll</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// 스크롤이 수직방향으로 200이상 내려가면 true 값을 할당해서</span>\n    <span class=\"token keyword\">const</span> shouldShowButton <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>scrollY <span class=\"token operator\">></span> <span class=\"token number\">200</span>\n\t\t<span class=\"token comment\">// setIsVisible 함수롤통해 isVisible의 값을 true로 바꿔줍니다.</span>\n    <span class=\"token function\">setIsVisible</span><span class=\"token punctuation\">(</span>shouldShowButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">// 스크롤 버튼을 눌렀을때 화면을 최상단으로 스크롤하는 함수입니다.</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">scrollToTop</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// window객체의 scrollTo 메서드를 사용해서 스크롤이 최상단에 올라가게 하고 부드럽게 움직일수 있도록 했습니다.</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">scrollTo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      top<span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n      behavior<span class=\"token operator\">:</span> <span class=\"token string\">'smooth'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\t<span class=\"token comment\">// useEffect Hook을 사용해서 컴포넌트가 처음 렌더링될 때만 스크롤 이벤트 리스너를 추가하고, 컴포넌트가 언마운트 될 때 리스너를 제거합니다.</span>\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// scroll 이벤트가 발생 할때마다 handleScroll 함수 호출합니다.</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">// 컴포넌트가 언마운트되기 전에 scroll 이벤트 리스너를 제거하고</span>\n\t\t<span class=\"token comment\">// 컴포넌트가 사라지는 경우에는 더 이상 해당 이벤트가 처리되지 않도록 합니다.</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> window<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> handleScroll<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 <code class=\"language-text\">useEffect</code> Hook을 사용하여 스크롤 이벤트 리스너를 추가하고 제거함으로써 컴포넌트가 렌더링될 때마다 스크롤 위치를 감지하고, 이에 따라 ‘isVisible’상태를 업데이트하여 스크롤 버튼을 표시하거나 숨깁니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ScrollToTopButton</span></span> <span class=\"token attr-name\">isVisible</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isVisible<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>scrollToTop<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>svg</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2rem<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">viewBox</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0 0 512 512<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>path</span> <span class=\"token attr-name\">d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> fill<span class=\"token operator\">:</span> <span class=\"token string\">'#fff'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>svg</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ScrollToTopButton</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이런 식으로 렌더링 해서 isVisible = true 일때 버튼이 보이고 버튼을 클릭하면 scrollToTop 함수를 실행하여 스크롤이 화면의 최상단에 올라가게 만들어주는 버튼을 완성했습니다.</p>\n<br>\n<p>컴포넌트가 언마운트되기 전에 scroll 이벤트 리스너를 제거하는 이유는 메모리 누수를 방지하고 성능을 최적화하기 위해서입니다.</p>\n<p>일반적으로 컴포넌트가 마운트된 상태에서는 해당 컴포넌트에 등록된 이벤트 리스너가 메모리에 유지됩니다. 이벤트 리스너는 컴포넌트의 수명 주기 동안 계속 유지되어 이벤트가 발생할 때마다 동작합니다.</p>\n<p>컴포넌트가 사라질 때 (언마운트될 때), 해당 컴포넌트와 관련된 리소스를 <code class=\"language-text\">clean-up</code> 하는 것이 중요하다고 생각합니다. 이벤트 리스너도 마찬가지로 정리되어야 하며 그렇지 않으면 컴포넌트가 사라져도 이벤트 리스너가 계속 유지되며, <code class=\"language-text\">메모리 누수</code>(memory leak)가 발생할 수 있습니다.</p>\n<p>따라서 <code class=\"language-text\">useEffect</code> 훅 내에서 <code class=\"language-text\">return</code> 구문을 사용하여 이벤트 리스너를 제거함으로써 컴포넌트가 언마운트될 때 해당 이벤트가 처리되지 않도록 합니다. 이를 통해 불필요한 메모리 소비와 성능 저하를 방지할 수 있습니다.</p>","frontmatter":{"title":"스크롤 버튼 만들기","summary":"미니프로젝트 스터디 발표 내용","date":"2023.07.07","categories":["STUDY"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAFF0lEQVQ4yyWS61OUBRSH3y7ILuwu7P3+7uXdd5eFZYnd8FJYWiIMSewEK5ApEUIgAgEKiBcyBMxdkIvsYmqUMWXYKOVoF5hKs4vjpbHLX9GH+g+eRvzw+3LOPM+cM+cIRqMKozELvSEbrS6bnFwl2aoMtDr1WnS6x3W1RrHWexSLQUnQrsRrUeC0qsnRZLBxU4Sunh6EXK0SnU6BXv8YstkNlJQUIwgCmZkZmM25uN12nKIdTU4mZnM2Bp0CteppMpVPrjHrMp+gonI7r1RVISiz1pGVvQ6jSY0mR4nf7+LDhRSDh/pJTpzivZFhZmenqKysICNDwGJR4bRkYTVkosh6am0bvSGXsu1lhMNhBJVKgULxaBIVRpMGTa6Szv1NrKxcJzV/hrHx4ywvf87bbS1odSqsdi2iLRuHWYFC+TTrsp+iXJbofXYDBXkBBJNJg1qtxGRUYzSo2Pric/T2dTJ0uJ8zqSSXPv+Y1FyC9PwsL20tJc9rJU/UUeDW43Po8TgMlIZkymUZKSAjaDVK9AYtak02NruV7o42mvfuYV9HMxcX5zl/YZbkxAlq4zEKiwvJy/fhtGmwGRXoDTkYDLlIkhtR8hKJhhFir1VjEx1o9Vrckpfenk7qX49THaugvqGWocMHGTzUx7MlxYgeJ+FIiMKQm6DfissrIgckvF4Psk9iy5bnEc5fSFEUfQZVjgY5GKCxqZG29lbqG+K8VvMqvX1d1DfsxGQx4RDtuCQRyedEkhyInkdCHy5RJD8/SGnppsfCHdWvECgMsSNWTXdvN30HejlwoIeurn0MHjpAT2/XGmi2mrA5rFhsJswWHVa7EbfHjVMUCYdDFBQEEWbPTNDc0sT7k0k6OjuI19Wy640GOrv2MTU9wdLSp5w7P0+0pBiDWYvRokVnUGM05+BwGHG5XAQCASKRIkKhPISaeIxYvIYLHy1wcOAgdfVx2ttbSSTGSU6cZGJynFR6kqPHBtnX2c7wyDGaW94iuj6C7Pci+SQ2by5l46b1hIISQqyulsjGDZxMJhh9/ySLi4sMDx9du/SJ0WHe6elgYLCH6Zkk586lWL52lU8vLzF2egJJktjy8ktsL99OcSRMvuxG2LlnN6HiIlra3iZ9Ns29e3eZnD7NuyeOc/PWD9x7cJeHfz5k4eMF+o8OMTef5puVFfbsbUaWfdTE4wTzA4guB+ECGWHztm1sLdvGM9EIA4MD3Lp1k9u/3ObiF0v8fO8uv//5B1eufcX45ATL337Dnb//IvXRAv6ATDQaJZgfxOWy4fF6eH5DCKFofQnFJSX0Hx7i2rdfMzM7w/XrX3E6NcfOxkZaOzoYGT3B9Mw0yanTJObOUPriZhwOKz5Zwm63rMmKCv3sqooiBEIF7HqjjvsP73P7zq/cuHGDqakEd+7/xoO//6IyFsPhdCK6nUiym7yghN/vRpY9aw8tulwUFubTUBmhvfFVhE/OHuX7Kwk+mDnCkUP76evbz+49taz+uMo///1LcrSf6m1hSktk/D4zbrcRj2RFkl2IohWvx059ZZSe1h10dx9EWEwfZvXyOCuXhjm+fwflG9zsrl7PbGKAT9JH+P7yKDevnOLquQFmRlrpfLOM8o0eivPM7CzLY7D5Bfrbqng9XsHIu+8h7K2roKupmsSRvVyc7OKzqXa+SHezeukYD76b4v7qHL9eO8VPV8f4ZXmcm0vH+fLCEB+ONZIerGKst5qWphpe3hTi/NlJ/gecmN+1DDw6iQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/7e02ee88c01e6a79e8a965f9de812e1d/0bb85/codingcat2.png","srcSet":"/static/7e02ee88c01e6a79e8a965f9de812e1d/ded7a/codingcat2.png 300w,\n/static/7e02ee88c01e6a79e8a965f9de812e1d/11603/codingcat2.png 600w,\n/static/7e02ee88c01e6a79e8a965f9de812e1d/0bb85/codingcat2.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/7e02ee88c01e6a79e8a965f9de812e1d/7de78/codingcat2.webp 300w,\n/static/7e02ee88c01e6a79e8a965f9de812e1d/d5eb6/codingcat2.webp 600w,\n/static/7e02ee88c01e6a79e8a965f9de812e1d/43fa5/codingcat2.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":1118}},"publicURL":"/static/7e02ee88c01e6a79e8a965f9de812e1d/codingcat2.png"}}}}]}},"pageContext":{"slug":"/mp_1/"}},"staticQueryHashes":[]}