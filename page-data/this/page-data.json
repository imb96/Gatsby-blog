{"componentChunkName":"component---src-templates-post-template-tsx","path":"/this/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<p>MDN에서 설명하는 this</p>\n<blockquote>\n<p>대부분의 경우 this의 값은 함수를 호출하는 방법에 따라 결정됩니다. 실행중에는 할당으로 설정할 수 없으며, 함수를 호출할 때마다 다를 수 있다. ES5는 <strong>함수를 어떻게 호출했는지 상관하지 않고 this 값을 설정할 수 있는</strong> <strong>bind</strong> 메서드를 도입했고 ES2015는 스스로의 <strong>this</strong> 바인딩을 제공하지 않는 <strong>화살표 함수</strong> 를 추가했다. (이는 렉시컬 컨텍스트 안의 this값을 유지한다.)</p>\n</blockquote>\n<p>this는 함수의 <strong>실행 컨텍스트</strong>(함수가 실행되는 환경)을 가리키는 키워드이다.\n자바스크립트에서는 모든 함수는 실행될 때 마다 함수 내부에 this라는 객체가 추가되며 함수가 <strong>호출된 방식</strong>에 따라서 this의 바인딩이 달라진다.</p>\n<p>기본적으로 this는 어디서든지 참조 가능하며 전역에서 this는 전역 객체를 가리킨다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// window</span></code></pre></div>\n<h3>객체의 메서드를 호출할 때</h3>\n<p>this는 함수를 실행할 때 함수를 소유하고 있는 객체를 참조한다. 즉 해당 메서드를 호출한 객체로 바인딩 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">sub</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> addRes <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>addRes<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 30</span>\n<span class=\"token keyword\">const</span> subRes <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>subRes<span class=\"token punctuation\">)</span> <span class=\"token comment\">// NaN</span></code></pre></div>\n<p>여기서 sub 메서드의 실행 결과는 NaN 값이 나온다. sub 메서드는 객체의 메서드로 호출되긴 하였지만 sub 메서드는 화살표 함수로 정의되어 있기 때문이다. 화살표함수의 this 대해서는 아래에서 알아보자.</p>\n<h3>일반 함수를 호출할 때</h3>\n<p>특정 객체의 메서드가 아닌 함수를 호출하면, 해당 함수 내부 코드에서 사용된 this는 전역객체에 바인딩 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 브라우저에서는 window Node.js 환경에서는 global</span></code></pre></div>\n<h3>생성자 함수를 통해 객체를 생성할 때</h3>\n<p>생상자 함수 내부에서 this는 생성자 함수가 생성할 인스턴스를 가리킨다.\nnew 키워드를 통해 생성자 함수를 호출할 때는 new 키워드를 통해서 호출된 함수 내부에서의 this는 객체 자신이 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> a\n\t<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> b\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> added <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Add</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">29</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>added<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 10</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>added<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 29</span></code></pre></div>\n<p>클래스 문법도 마찬가지이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Add</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">=</span> a\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b <span class=\"token operator\">=</span> b  \n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> added <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Add</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">29</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>added<span class=\"token punctuation\">.</span>a<span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>added<span class=\"token punctuation\">.</span>b<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<h3>화살표 함수를 호출할 때</h3>\n<p>위에서 설명한 객체의 메서드를 호출할때 예제를 다시 봐보자</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">a</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token literal-property property\">b</span><span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">sub</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>a <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>b\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> addRes <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>addRes<span class=\"token punctuation\">)</span> <span class=\"token comment\">// 30</span>\n<span class=\"token keyword\">const</span> subRes <span class=\"token operator\">=</span> obj<span class=\"token punctuation\">.</span><span class=\"token function\">sub</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>subRes<span class=\"token punctuation\">)</span> <span class=\"token comment\">// NaN</span></code></pre></div>\n<p>다른 함수 호출 방법에서 this는 호출될 떄 this의 바인딩이 결정되지만 화살표 함수 에서 this는 선언될 때 결정 된다.\n화살표 함수에서 this는 자신을 감싼 정적 범위(lexical context)이며 , 즉 함수가 <strong>정의된 위치</strong>에서 this를 결정하며 이후에는 변경되지 않는다.\n화살표 함수를 bind, call, apply를 통해 호출해도 무시된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello Arrow Function'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">arrowFunction</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> bindFunction <span class=\"token operator\">=</span> <span class=\"token function\">arrowFunction</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> calledFunction <span class=\"token operator\">=</span> <span class=\"token function\">arrowFunction</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> appliedFunction <span class=\"token operator\">=</span> <span class=\"token function\">arrowFunction</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">arrowFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// undefined</span>\n<span class=\"token function\">bindFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// undefined</span>\n<span class=\"token function\">calledFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// TypeError: 화살표 함수는 call메서드 사용할 수 없다.</span>\n<span class=\"token function\">appliedFunction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// TypeError: 화살표 함수는 apply메서드 사용할 수 없다.</span>\n</code></pre></div>\n<h3>bind, call, apply를 통한 호출</h3>\n<p>this의 바인딩을 지정할 수 있게 해주는 메서드이다.</p>\n<ul>\n<li><code class=\"language-text\">bind</code>: bind 메서드는 함수를 호출하는 것이 아닌, 새로운 함수를 생성하며 새로운 함수는 원본 함수와 동일한 코드를 가지며 지정한 this와 파라미터들을 가지고 호출될 때 사용된다.</li>\n<li><code class=\"language-text\">call</code>: call 메서드는 함수를 호출하는 것이지만, 첫 번째 인자로 전달한 값이 해당 함수의 this로 사용된다. 그리고 함수의 파라미터들을 순서대로 넘겨준다.</li>\n<li><code class=\"language-text\">apply</code>: apply 메서드는 call과 마찬가지로 함수를 호출하며 두 번째 인자로 배열을 받아서 해당 함수의 파라미터들로 사용된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> obj1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Hello'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> obj2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'Javascript'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> obj3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'World'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">printMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> bindF <span class=\"token operator\">=</span> <span class=\"token function\">printMessage</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span>obj1<span class=\"token punctuation\">)</span>\n<span class=\"token function\">bindF</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">printMessage</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>obj2<span class=\"token punctuation\">)</span>\n<span class=\"token function\">printMessage</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>obj3<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 출력: Hello Javascript World</span></code></pre></div>","frontmatter":{"title":"자바스크립트에서의 this","summary":"자주 헷갈리는 키워드, 자바스크립트에서의 this는 어떻게 동작할까?","date":"2023-08-04","categories":["JS"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAMABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUCBgcJ/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAEDBf/aAAwDAQACEAMQAAAB7TUzTV2JR6QEf//EABoQAAMBAAMAAAAAAAAAAAAAAAMEBQACBhX/2gAIAQEAAQUCrOMJLy+y+kfFEI/AU6cuTf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABcRAAMBAAAAAAAAAAAAAAAAABARITH/2gAIAQIBAT8Biyj/xAAhEAADAAEEAgMBAAAAAAAAAAABAgMEBRESEwAUECExQf/aAAgBAQAGPwKdsaU7v7UkaDvOPbIrVqLO9qxhCgVOYrduoKrcgSR5p8WXFxq3WyZOKuoaVqFe8YccrHpBtP1LIPqWHucKdVVYQBakuS8/Ou8pWmSCZ2mtUJH4Sjhl3H8+vrxa4+nYEKoCqVhhY0aIrb8glJyV1Dcm3AIB3O/6fj//xAAaEAEAAgMBAAAAAAAAAAAAAAABESEAEDFh/9oACAEBAAE/IZPkdz7MFQj4RGks9UegOmcvq2agCmWIW0yXM8wnYKKRjzm6c//aAAwDAQACAAMAAAAQe8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAaEQEAAgMBAAAAAAAAAAAAAAABESEQMUFx/9oACAECAQE/EBKGVoa6d8bnfNY//8QAGxABAAICAwAAAAAAAAAAAAAAAQARUdFhkaH/2gAIAQEAAT8QRu0Ez2XbzJGDq5ktab8KYomW8dGoppmEZwsr2wststkjaAIyItGAIvg93P/Z"},"images":{"fallback":{"src":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/97099/til.jpg","srcSet":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/d75cc/til.jpg 557w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/a3617/til.jpg 1113w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/97099/til.jpg 2226w","sizes":"(min-width: 2226px) 2226px, 100vw"},"sources":[{"srcSet":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/9e13a/til.webp 557w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/f9e0a/til.webp 1113w,\n/static/2df6bd11efdc8de0ac54d805ca1ba1ab/b09bd/til.webp 2226w","type":"image/webp","sizes":"(min-width: 2226px) 2226px, 100vw"}]},"width":2226,"height":1322}},"publicURL":"/static/2df6bd11efdc8de0ac54d805ca1ba1ab/til.jpg"}}}}]}},"pageContext":{"slug":"/this/"}},"staticQueryHashes":[],"slicesMap":{}}